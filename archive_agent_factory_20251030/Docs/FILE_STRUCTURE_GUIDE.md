# ðŸ“ Generated Files Structure Guide

**Where Meta-Agent saves generated code, specifications, and other files**

---

## ðŸ—‚ï¸ Complete Directory Structure

```
AgenticPOC_New/                          â† Project root
â”‚
â”œâ”€â”€ agent_specs/                         â† YAML Specifications
â”‚   â”œâ”€â”€ dataagent.yaml                   â† DataAgent specification
â”‚   â”œâ”€â”€ calcagent.yaml                   â† CalcAgent specification
â”‚   â”œâ”€â”€ analysisagent.yaml               â† Future agents...
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ generated_agents/                    â† All Generated Code
â”‚   â”œâ”€â”€ agents/                          â† Agent Python Files
â”‚   â”‚   â”œâ”€â”€ dataagent.py                 â† DataAgent implementation
â”‚   â”‚   â”œâ”€â”€ calcagent.py                 â† CalcAgent implementation
â”‚   â”‚   â”œâ”€â”€ analysisagent.py             â† Future agents...
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ tests/                           â† Test Files (if generated)
â”‚       â”œâ”€â”€ test_dataagent.py
â”‚       â”œâ”€â”€ test_calcagent.py
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ logs/                                â† Execution Logs
â”‚   â”œâ”€â”€ generation_20251028_093000.log   â† Timestamped logs
â”‚   â”œâ”€â”€ test_run_20251028_094500.log
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ meta_agent/                          â† Meta-Agent Source Code
â”‚   â”œâ”€â”€ tools/                           â† Generation tools
â”‚   â”œâ”€â”€ validators/                      â† Code validators
â”‚   â”œâ”€â”€ utils/                           â† Utilities (LLM client, etc.)
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .env                                 â† Configuration (auto-created by setup_env.sh)
â”œâ”€â”€ config.py                            â† Configuration management
â”œâ”€â”€ simple_example.py                    â† Main execution script
â””â”€â”€ requirements.txt                     â† Python dependencies
```

---

## ðŸ“ File Naming Conventions

### **1. YAML Specifications** (`agent_specs/`)

**Format**: `{agent_name_lowercase}.yaml`

**Examples**:
- `DataAgent` â†’ `dataagent.yaml`
- `CalcAgent` â†’ `calcagent.yaml`
- `AnalysisAgent` â†’ `analysisagent.yaml`

**Content**:
```yaml
agent_name: DataAgent
agent_type: data_retrieval
version: "1.0.0"
description: "Fetches property data from PostgreSQL"
role: tool
capabilities:
  - Connect to PostgreSQL
  - Query financial metrics
  - Validate data integrity
# ... more YAML
```

---

### **2. Python Agent Files** (`generated_agents/agents/`)

**Format**: `{agent_name_lowercase}.py`

**Examples**:
- `DataAgent` â†’ `dataagent.py`
- `CalcAgent` â†’ `calcagent.py`
- `AnalysisAgent` â†’ `analysisagent.py`

**Content Structure**:
```python
"""
DataAgent - Fetches property data from PostgreSQL
Generated by Meta-Agent
"""

import os
from typing import Dict, Any
from loguru import logger
from sqlalchemy import create_engine
# ... imports

class DataAgent:
    """
    Agent for fetching property data from PostgreSQL database.
    """
    
    def __init__(self):
        """Initialize DataAgent with database connection."""
        self.db_url = os.getenv('DATABASE_URL')
        # ... initialization
    
    def fetch_data(self, property_id: int) -> Dict[str, Any]:
        """Fetch property data for given ID."""
        # ... implementation
    
    # ... more methods
```

---

### **3. Test Files** (`generated_agents/tests/`)

**Format**: `test_{agent_name_lowercase}.py`

**Examples**:
- `DataAgent` â†’ `test_dataagent.py`
- `CalcAgent` â†’ `test_calcagent.py`

**Content Structure**:
```python
"""
Tests for DataAgent
Generated by Meta-Agent
"""

import pytest
from generated_agents.agents.dataagent import DataAgent

def test_dataagent_init():
    """Test DataAgent initialization."""
    agent = DataAgent()
    assert agent is not None

def test_fetch_data():
    """Test data fetching functionality."""
    agent = DataAgent()
    result = agent.fetch_data(1)
    assert result is not None
    # ... assertions
```

---

### **4. Log Files** (`logs/`)

**Format**: `generation_{YYYYMMDD_HHMMSS}.log`

**Examples**:
- `generation_20251028_093953.log`
- `test_run_20251028_094520.log`

**Content**:
```
2025-10-28 09:39:53 | INFO     | Initializing LLM client...
2025-10-28 09:39:58 | INFO     | âœ“ LLM client initialized
2025-10-28 09:40:00 | INFO     | Analyzing requirements...
2025-10-28 09:40:21 | INFO     | âœ“ Requirements analyzed
# ... more logs
```

---

## ðŸ”§ Configuration (`config.py`)

### **Path Settings**:

```python
class Settings(BaseSettings):
    # Output directories
    output_dir: Path = Field(default=Path("./generated_agents"))
    spec_dir: Path = Field(default=Path("./agent_specs"))
    log_dir: Path = Field(default=Path("./logs"))
```

### **Customization** (via `.env` file):

```bash
# Optional: Override default paths
OUTPUT_DIR=./my_custom_agents
SPEC_DIR=./my_custom_specs
LOG_DIR=./my_custom_logs
```

---

## ðŸ¤– How Files Are Created

### **1. Specifications** (`write_agent_files()` in `file_operations.py`):

```python
spec_path = settings.spec_dir / f"{agent_name.lower()}.yaml"
write_file(str(spec_path), specification, overwrite=True)
```

**Result**: `./agent_specs/dataagent.yaml`

---

### **2. Agent Code** (`write_agent_files()` in `file_operations.py`):

```python
code_path = settings.output_dir / "agents" / f"{agent_name.lower()}.py"
write_file(str(code_path), code, overwrite=True)
```

**Result**: `./generated_agents/agents/dataagent.py`

---

### **3. Tests** (if provided):

```python
test_path = settings.output_dir / "tests" / f"test_{agent_name.lower()}.py"
write_file(str(test_path), tests, overwrite=True)
```

**Result**: `./generated_agents/tests/test_dataagent.py`

---

## ðŸ” Example: Complete Generation Flow

### **User Request**:
```
"Calculate DSCR for properties from PostgreSQL"
```

### **Files Generated**:

```
Step 1: Requirements Analysis
â””â”€ (internal processing, no files)

Step 2: Architecture Design
â”œâ”€ DataAgent (tool)
â””â”€ CalcAgent (primary_agent)

Step 3: Specification Generation
â”œâ”€ agent_specs/dataagent.yaml        â† Created (2,192 bytes)
â””â”€ agent_specs/calcagent.yaml        â† Created (2,068 bytes)

Step 4: Code Generation
â”œâ”€ generated_agents/agents/dataagent.py    â† Created (59 lines)
â””â”€ generated_agents/agents/calcagent.py    â† Created (67 lines)

Step 5: Validation
â””â”€ (validates code, no files created)

Step 6: File Writing
â”œâ”€ âœ… agent_specs/dataagent.yaml
â”œâ”€ âœ… agent_specs/calcagent.yaml
â”œâ”€ âœ… generated_agents/agents/dataagent.py
â””â”€ âœ… generated_agents/agents/calcagent.py

Logs:
â””â”€ logs/generation_20251028_093953.log    â† Created
```

---

## ðŸ“Š File Size Estimates

| File Type | Typical Size | Example |
|-----------|--------------|---------|
| **YAML Spec** | 1-3 KB | 2,192 bytes (DataAgent) |
| **Python Code** | 2-10 KB | 3,450 bytes (59 lines) |
| **Test File** | 2-5 KB | ~2,000 bytes |
| **Log File** | 50-200 KB | Varies by execution time |

---

## ðŸ›¡ï¸ File Operations Security

### **Directory Creation**:
```python
# Automatic creation with safety
file_path.parent.mkdir(parents=True, exist_ok=True)
```

- âœ… Creates all parent directories automatically
- âœ… Safe if directory already exists
- âœ… No race conditions

### **Overwrite Protection**:
```python
if file_path.exists() and not overwrite:
    raise FileExistsError("File already exists")
```

- âœ… Prevents accidental overwrites
- âœ… Explicit `overwrite=True` required
- âœ… Clear error messages

### **Encoding**:
```python
file_path.write_text(content, encoding='utf-8')
```

- âœ… UTF-8 encoding for all files
- âœ… Handles special characters
- âœ… Cross-platform compatible

---

## ðŸ“‚ Browsing Generated Files

### **Command Line**:

```bash
# List all specifications
ls -la agent_specs/

# List all generated agents
ls -la generated_agents/agents/

# List all tests
ls -la generated_agents/tests/

# List all logs
ls -la logs/

# View a specification
cat agent_specs/dataagent.yaml

# View generated code
cat generated_agents/agents/dataagent.py

# View latest log
tail -f logs/generation_*.log | tail -1
```

### **File Manager**:
```
Open Finder â†’ Navigate to AgenticPOC_New/
â”œâ”€â”€ agent_specs/ (YAML files)
â”œâ”€â”€ generated_agents/
â”‚   â”œâ”€â”€ agents/ (Python files)
â”‚   â””â”€â”€ tests/ (Test files)
â””â”€â”€ logs/ (Log files)
```

---

## ðŸ”„ File Lifecycle

### **1. Generation Phase**:
```
User Request
    â†“
Requirements Analysis (no files)
    â†“
Architecture Design (no files)
    â†“
Specification Generation
    â†“
âœ… YAML files written to agent_specs/
    â†“
Code Generation
    â†“
Code Validation
    â†“
âœ… Python files written to generated_agents/agents/
    â†“
âœ… Log file written to logs/
```

### **2. Usage Phase**:
```
Import generated agent:
    from generated_agents.agents.dataagent import DataAgent
    
Use the agent:
    agent = DataAgent()
    result = agent.fetch_data(property_id=1)
    
Review specification:
    Open agent_specs/dataagent.yaml
    
Check logs:
    Open logs/generation_YYYYMMDD_HHMMSS.log
```

---

## âœ… Verification Commands

### **Check if directories exist**:
```bash
cd AgenticPOC_New
test -d agent_specs && echo "âœ… agent_specs exists"
test -d generated_agents/agents && echo "âœ… generated_agents/agents exists"
test -d generated_agents/tests && echo "âœ… generated_agents/tests exists"
test -d logs && echo "âœ… logs exists"
```

### **Count generated files**:
```bash
echo "YAML specs: $(ls agent_specs/*.yaml 2>/dev/null | wc -l)"
echo "Agent files: $(ls generated_agents/agents/*.py 2>/dev/null | wc -l)"
echo "Test files: $(ls generated_agents/tests/*.py 2>/dev/null | wc -l)"
echo "Log files: $(ls logs/*.log 2>/dev/null | wc -l)"
```

### **Show latest generated agent**:
```bash
ls -lt generated_agents/agents/*.py | head -1
```

---

## ðŸ“‹ Summary

### **Where Files Go**:
| Generated File | Saved To | Format |
|----------------|----------|--------|
| **YAML Specification** | `agent_specs/` | `{agent}_lowercase.yaml` |
| **Python Code** | `generated_agents/agents/` | `{agent}_lowercase.py` |
| **Test Files** | `generated_agents/tests/` | `test_{agent}_lowercase.py` |
| **Execution Logs** | `logs/` | `generation_{timestamp}.log` |

### **Key Features**:
- âœ… **Automatic**: Directories created automatically
- âœ… **Organized**: Clear separation of specs, code, tests
- âœ… **Safe**: Overwrite protection, proper encoding
- âœ… **Logged**: All operations logged with timestamps
- âœ… **Configurable**: Paths can be customized via .env

---

**All generated files are saved automatically to their respective folders during execution!** ðŸŽ‰

**No manual file management needed - the system handles everything!** âœ…

